{% extends 'base.html' %}
{% block title %}Edit Product{% endblock %}
{% block content %}
<h2>Edit Product</h2>
{% if error %}
    <p class="error">{{ error }}</p>
{% endif %}
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="name">Name</label>
    <input type="text" id="name" name="name" value="{{ product.name }}" required />
    <br />

    <label for="category">Category</label>
    <select id="category" name="category" required>
        <option value="">Select a category</option>
        <option value="chips" {% if product.category == 'chips' %}selected{% endif %}>Chips</option>
        <option value="candy" {% if product.category == 'candy' %}selected{% endif %}>Candy</option>
        <option value="milk" {% if product.category == 'milk' %}selected{% endif %}>Milk</option>
    </select>
    <br />

    <label for="ex_date">Expire Date</label>
    <input type="date" id="ex_date" name="ex_date" value="{{ product.ex_date|date:'Y-m-d' }}" required />
    <br />

    <label for="description">Description</label>
    <textarea id="description" name="description" required>{{ product.description }}</textarea>
    <br />

    <label for="price">Price</label>
    <input type="number" id="price" name="price" value="{{ product.price }}" required />
    <br />

    <label for="country">Country</label>
    <input type="text" id="country" name="country" value="{{ product.country }}" required />
    <br />

    <label for="image">Image</label>
    <input type="file" id="image" name="image" accept="image/*" />
    <p>Current image: <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width:100px;" /></p>
    <br /><br />

    <input type="submit" value="Update" />
</form>
<a href="{% url 'home' %}">Back to Home</a>
{% endblock %}